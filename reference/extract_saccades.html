<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract saccades from samples using votes from selected methods. — extract_saccades • saccadr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extract saccades from samples using votes from selected methods. — extract_saccades"><meta property="og:description" content="Extract saccades from samples using votes from selected methods. Each method votes whether
a given sample belongs to a saccade. Next, saccades are identified via a majority vote using the 
vote_threshold parameter, as well as a minimal duration and minimal temporal separation criteria.
Please note that units of the gaze samples must be in  degrees of visual angle. The units are important
as some methods use specific (e.g., physiologically plausible) velocity and acceleration thresholds. 
By default, ensemble includes methods proposed by Engbret &amp;amp; Kliegl (2003) (&quot;ek&quot;),
Otero-Millan et al. (&quot;om&quot;), and Nyström &amp;amp; Holmqvist (2010) (&quot;nh&quot;), 
see Implemented Methods vignette. However, it can be extended
via custom methods, see Using Custom Methods vignette.
By default, the function returns a table with identified saccades but can return a matrix with method's votes
per sample instead (return_votes = TRUE)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">saccadr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/methods.html">Implemented Methods</a>
    </li>
    <li>
      <a href="../articles/using_custom_methods.html">Using Custom Methods</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract saccades from samples using votes from selected methods.</h1>
    
    <div class="hidden name"><code>extract_saccades.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract saccades from samples using votes from selected methods. Each method votes whether
a given sample belongs to a saccade. Next, saccades are identified via a majority vote using the 
<code>vote_threshold</code> parameter, as well as a minimal duration and minimal temporal separation criteria.
Please note that units of the gaze samples must be in  <strong>degrees of visual angle</strong>. The units are important
as some methods use specific (e.g., physiologically plausible) velocity and acceleration thresholds.</p> 
<p>By default, ensemble includes methods proposed by Engbret &amp; Kliegl (2003) (<code>"ek"</code>),
Otero-Millan et al. (<code>"om"</code>), and Nyström &amp; Holmqvist (2010) (<code>"nh"</code>), 
see <em>Implemented Methods</em> vignette. However, it can be extended
via custom methods, see <em>Using Custom Methods</em> vignette.</p>
<p>By default, the function returns a table with identified saccades but can return a matrix with method's votes
per sample instead (<code>return_votes = TRUE</code>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_saccades</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">sample_rate</span>,</span>
<span>  trial <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"ek"</span>, <span class="st">"om"</span>, <span class="st">"nh"</span><span class="op">)</span>,</span>
<span>  options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  velocity_time_window <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  binocular <span class="op">=</span> <span class="st">"merge"</span>,</span>
<span>  vote_threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">methods</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">1</span>, <span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">methods</span><span class="op">)</span> <span class="op">-</span></span>
<span>    <span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">methods</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.99</span><span class="op">)</span>,</span>
<span>  minimal_duration_ms <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  minimal_separation_ms <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  return_votes <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>Horizontal coordinate, either a vector for monocular data or a two-column matrix for binocular data.</p></dd>


<dt>y</dt>
<dd><p>Vertical coordinate, either a vector for monocular data or a two-column matrix for binocular data.</p></dd>


<dt>sample_rate</dt>
<dd><p>Sampling rate in Hz. It is assumed to be common for the entire time series.
If the time series contains chunks (trials) that were recorded using different acquisition rate
(e.g., SR Research Eyelink allows to set different acquisition rate for each recording / trial),
you would need to split the time series and analyze them separately.</p></dd>


<dt>trial</dt>
<dd><p>Optional vector with trial ID. If omitted, all samples are assumed to belong to a single trial.
Velocity, acceleration, and saccades themselves are computed respecting trial borders.</p></dd>


<dt>methods</dt>
<dd><p>A <em>list</em> (not a vector!) with names of package methods (character) or external functions that
implement sample classification (see <em>Using Custom Methods</em> vignette). Package methods include
Engbret &amp; Kliegl (2003) (<code>"ek"</code>), Otero-Millan et al. (<code>"om"</code>), Nyström and Holmqvist (2010) (<code>"nh"</code>).</p></dd>


<dt>options</dt>
<dd><p>A named list with options for a specific method, see documentation on specific method for details.</p></dd>


<dt>velocity_time_window</dt>
<dd><p>Time window for computing velocity and acceleration in milliseconds.</p></dd>


<dt>binocular</dt>
<dd><p>Specifies how a binocular data is treated. Options are <code>"cyclopean"</code> (binocular data is
converted to an average cyclopean image before saccades are extracted), <code>"monocular"</code> (saccades
are extracted independently for each eye), <code>"merge"</code> (default, saccades are extracted for each eye
independently but saccades from different eyes that temporally overlap are averaged into a binocular
saccade).</p></dd>


<dt>vote_threshold</dt>
<dd><p>Value between 0..1 defining a vote threshold for a saccade.
By default, all but one method (\(threshold = \frac{N-1}{N}\)
where N is number of methods used) must agree for a sample to be considered for a saccade.
Threshold of 1 is applied if a single method is used.</p></dd>


<dt>minimal_duration_ms</dt>
<dd><p>Minimal duration of a saccade in milliseconds. Shorter candidate saccades are discarded,</p></dd>


<dt>minimal_separation_ms</dt>
<dd><p>Minimal time separation between saccades in milliseconds. Saccades that are
separated by a shorter interval of "not a saccade" votes, will be merged including that period.</p></dd>


<dt>return_votes</dt>
<dd><p>Logical. Whether function should return extracted microsaccades (<code>FALSE</code>, default)
or votes per sample (<code>TRUE</code>).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>data.frame</code> with saccade properties (see **details**), if <code>return_votes = FALSE</code>.
Alternatively, it returns votes per sample (<code>return_votes = TRUE</code>). For a monocular processing (monocular
input, cyclopean or merged binocular data) it is a matrix with <code>nrow(x)</code> rows and <code>length(methods)</code></p>


<p>columns with 0/1 votes for each sample and method. For binocular processing, function returns a two element</p>
<p></p>
<p><code>list</code> with same matrices but per eye.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Variables that describe saccade</p><ul><li><p><code>Trial</code> Trial index.</p></li>
<li><p><code>Eye</code> <code>"Monocular"</code> for monocular inputs. <code>"Cyclopean"</code> for binocular data that
was averaged <em>before</em> applying algorithms. <code>"Binocular"</code> for binocular data with votes
averaged <em>after</em> applying algorithms. <code>"Left"</code> or <code>"Right"</code> for binocular data
when eyes are processed independently.</p></li>
<li><p><code>OnsetSample</code> Index of the first sample.</p></li>
<li><p><code>OffsetSample</code> Index of the last sample.</p></li>
<li><p><code>Onset</code> Onset time relative to the trial start in milliseconds.</p></li>
<li><p><code>Offset</code> Offset time relative to the trial start in milliseconds.</p></li>
<li><p><code>Duration</code> Duration in milliseconds.</p></li>
<li><p><code>DisplacementX</code> Horizontal displacement measured from the <em>first</em> to the <em>last</em> sample.</p></li>
<li><p><code>DisplacementY</code> Vertical displacement measured from the <em>first</em> to the <em>last</em> sample.</p></li>
<li><p><code>Displacement</code> Displacement magnitude measured from the <em>first</em> to the <em>last</em> sample.</p></li>
<li><p><code>DisplacementPhi</code> Displacement direction measured from the <em>first</em> to the <em>last</em> sample.</p></li>
<li><p><code>AmplitudeX</code> Horizontal displacement measured from the <em>leftmost</em> to the <em>rightmost</em> sample.</p></li>
<li><p><code>AmplitudeY</code> Vertical displacement measured from the <em>lowest</em> to the <em>uppermost</em> sample.</p></li>
<li><p><code>Amplitude</code> Displacement magnitude measured from the most extreme samples.</p></li>
<li><p><code>Amplitude</code> Displacement direction measured from the most extreme samples.</p></li>
<li><p><code>VelocityPeak</code> Peak velocity.</p></li>
<li><p><code>VelocityAvg</code> Average velocity.</p></li>
<li><p><code>AccelerationPeak</code> Peak acceleration.</p></li>
<li><p><code>AccelerationAvg</code> Average acceleration.</p></li>
<li><p><code>AccelerationStart</code> Peak acceleration <em>before</em> peak velocity was reached.</p></li>
<li><p><code>AccelerationStop</code> Peak acceleration <em>after</em> peak velocity was reached.</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">single_trial</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">saccades</span> <span class="op">&lt;-</span> <span class="fu">extract_saccades</span><span class="op">(</span><span class="va">single_trial</span><span class="op">$</span><span class="va">x</span>, <span class="va">single_trial</span><span class="op">$</span><span class="va">y</span>, <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in compute_velocity_ek(x, trial, time_window_in_samples, delta_t):</span> object 'vel_df' not found</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alexander Pastukhov.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

