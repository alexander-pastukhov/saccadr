<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using Custom Methods â€¢ saccadr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using Custom Methods">
<meta property="og:description" content="saccadr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">saccadr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/methods.html">Implemented Methods</a>
    </li>
    <li>
      <a href="../articles/using_custom_methods.html">Using Custom Methods</a>
    </li>
    <li>
      <a href="../articles/using_sample_votes.html">Using Sample Votes</a>
    </li>
    <li>
      <a href="../articles/velocity_computation.html">Velocity computation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using Custom Methods</h1>
            
      
      
      <div class="hidden name"><code>using_custom_methods.Rmd</code></div>

    </div>

    
    
<p>You can pass a custom function to the <code><a href="../reference/extract_saccades.html">extract_saccades()</a></code>
alongside the internally implemented method. The function must be
declared as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">custom_saccade_voting_method</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,</span>
<span>                                         <span class="va">y</span>,</span>
<span>                                         <span class="va">vel</span>,</span>
<span>                                         <span class="va">acc</span>,</span>
<span>                                         <span class="va">sample_rate</span>,</span>
<span>                                         <span class="va">trial</span>,</span>
<span>                                         <span class="va">options</span><span class="op">)</span> <span class="op">{</span></span>
<span>                                         </span>
<span>  <span class="co"># implement you method that computes a 0/1 vote per sample</span></span>
<span>  </span>
<span>  <span class="va">sample_votes</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Arguments that are passed to the function (all vectors/tables have
the same length/number of rows):</p>
<ul>
<li>
<code>x</code>, <code>y</code> vectors with <em>monocular</em>
samples (either for one of the eyes or cyclopean). On the one hand, you
can assume that samples are in degrees of visual angle as the package
users are warned that using non-standard units may invalidate some
internally implemented methods. On the other hand, as you are
implementing a custom method for your own data, you can treat them in
the units you see fit (input vectors <code>x</code> and <code>y</code>
are not transformed but for averaging in case of cyclopean data).</li>
<li>
<code>vel</code> and <code>acc</code> are data frames with velocity
and acceleration samples. Each table has columns <code>x</code>
(horizontal component), <code>y</code> (vertical component), and
<code>amp</code> (amplitude). See below for details on velocity
computation.</li>
<li>
<code>sample_rate</code> scalar value in Hz.</li>
<li>
<code>trial</code> vector with trial index per sample.</li>
<li>
<code>options</code> a named list with method-specific options. See
the example below for how to use them. See also
<code><a href="../reference/option_or_default.html">option_or_default()</a></code> function.</li>
</ul>
<p>Your function must return a vector of the same length as
<code>x</code> with votes (<span class="math inline">\(1\)</span> if
sample is a potential saccade, <span class="math inline">\(0\)</span>
otherwise, you can also use logical values).</p>
<div class="section level2">
<h2 id="example-implementation">Example implementation<a class="anchor" aria-label="anchor" href="#example-implementation"></a>
</h2>
<p>Here is an example implementation of an overly simple custom method
that labels a sample as a saccade if its velocity exceeds a predefined
threshold. It expects the threshold parameter as
<code>"st_velocity_threshold"</code> member of the list and uses a
default threshold of <span class="math inline">\(50 \deg / s\)</span>
(an arbitrary number!) if no threshold was provided.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simple_threshold_method</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,</span>
<span>                                    <span class="va">y</span>,</span>
<span>                                    <span class="va">vel</span>,</span>
<span>                                    <span class="va">acc</span>,</span>
<span>                                    <span class="va">sample_rate</span>,</span>
<span>                                    <span class="va">trial</span>,</span>
<span>                                    <span class="va">options</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="co"># obtain method parameters or use defaults</span></span>
<span>  <span class="va">velocity_threshold</span> <span class="op">&lt;-</span> <span class="fu">saccadr</span><span class="fu">::</span><span class="fu"><a href="../reference/option_or_default.html">option_or_default</a></span><span class="op">(</span><span class="va">options</span>, <span class="st">"st_velocity_threshold"</span>, <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># vote on each sample  </span></span>
<span>  <span class="va">sample_vote</span> <span class="op">&lt;-</span> <span class="va">vel</span><span class="op">[[</span><span class="st">'amp'</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">velocity_threshold</span></span>
<span>  </span>
<span>  <span class="co"># return votes</span></span>
<span>  <span class="va">sample_vote</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Once you implemented your method, you can pass it alongside
internally implemented methods:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"single_trial"</span><span class="op">)</span></span>
<span><span class="va">saccades</span> <span class="op">&lt;-</span> <span class="fu">saccadr</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_saccades.html">extract_saccades</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">single_trial</span><span class="op">$</span><span class="va">x</span>,</span>
<span>                                      y <span class="op">=</span> <span class="va">single_trial</span><span class="op">$</span><span class="va">y</span>,</span>
<span>                                      sample_rate <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                                      methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"ek"</span>, <span class="st">"om"</span>, <span class="st">"nh"</span>, <span class="va">simple_threshold_method</span><span class="op">)</span>,</span>
<span>                                      options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"st_velocity_threshold"</span> <span class="op">=</span> <span class="fl">70</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Alexander Pastukhov.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
