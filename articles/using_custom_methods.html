<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="saccadr">
<title>Using Custom Methods â€¢ saccadr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using Custom Methods">
<meta property="og:description" content="saccadr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">saccadr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/methods.html">Implemented Methods</a>
    <a class="dropdown-item" href="../articles/using_custom_methods.html">Using Custom Methods</a>
    <a class="dropdown-item" href="../articles/using_sample_votes.html">Using Sample Votes</a>
    <a class="dropdown-item" href="../articles/velocity_computation.html">Velocity computation</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/alexander-pastukhov/saccadr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Using Custom Methods</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/alexander-pastukhov/saccadr/blob/HEAD/vignettes/using_custom_methods.Rmd" class="external-link"><code>vignettes/using_custom_methods.Rmd</code></a></small>
      <div class="d-none name"><code>using_custom_methods.Rmd</code></div>
    </div>

    
    
<p>You can pass a custom function to the <code><a href="../reference/extract_saccades.html">extract_saccades()</a></code>
alongside the internally implemented method. The function must be
declared as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">custom_saccade_voting_method</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,</span>
<span>                                         <span class="va">y</span>,</span>
<span>                                         <span class="va">vel</span>,</span>
<span>                                         <span class="va">acc</span>,</span>
<span>                                         <span class="va">sample_rate</span>,</span>
<span>                                         <span class="va">trial</span>,</span>
<span>                                         <span class="va">options</span><span class="op">)</span> <span class="op">{</span></span>
<span>                                         </span>
<span>  <span class="co"># implement you method that computes a 0/1 vote per sample</span></span>
<span>  </span>
<span>  <span class="va">sample_votes</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Arguments that are passed to the function (all vectors/tables have
the same length/number of rows):</p>
<ul>
<li>
<code>x</code>, <code>y</code> vectors with <em>monocular</em>
samples (either for one of the eyes or cyclopean). On the one hand, you
can assume that samples are in degrees of visual angle as the package
users are warned that using non-standard units may invalidate some
internally implemented methods. On the other hand, as you are
implementing a custom method for your own data, you can treat them in
the units you see fit (input vectors <code>x</code> and <code>y</code>
are not transformed but for averaging in case of cyclopean data).</li>
<li>
<code>vel</code> and <code>acc</code> are data frames with velocity
and acceleration samples. Each table has columns <code>x</code>
(horizontal component), <code>y</code> (vertical component), and
<code>amp</code> (amplitude). See below for details on velocity
computation.</li>
<li>
<code>sample_rate</code> scalar value in Hz.</li>
<li>
<code>trial</code> vector with trial index per sample.</li>
<li>
<code>options</code> a named list with method-specific options. See
the example below for how to use them. See also
<code><a href="../reference/option_or_default.html">option_or_default()</a></code> function.</li>
</ul>
<p>Your function must return a vector of the same length as
<code>x</code> with votes (<span class="math inline">\(1\)</span> if
sample is a potential saccade, <span class="math inline">\(0\)</span>
otherwise, you can also use logical values).</p>
<div class="section level2">
<h2 id="example-implementation">Example implementation<a class="anchor" aria-label="anchor" href="#example-implementation"></a>
</h2>
<p>Here is an example implementation of an overly simple custom method
that labels a sample as a saccade if its velocity exceeds a predefined
threshold. It expects the threshold parameter as
<code>"st_velocity_threshold"</code> member of the list and uses a
default threshold of <span class="math inline">\(50 \deg / s\)</span>
(an arbitrary number!) if no threshold was provided.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simple_threshold_method</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,</span>
<span>                                    <span class="va">y</span>,</span>
<span>                                    <span class="va">vel</span>,</span>
<span>                                    <span class="va">acc</span>,</span>
<span>                                    <span class="va">sample_rate</span>,</span>
<span>                                    <span class="va">trial</span>,</span>
<span>                                    <span class="va">options</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="co"># obtain method parameters or use defaults</span></span>
<span>  <span class="va">velocity_threshold</span> <span class="op">&lt;-</span> <span class="fu">saccadr</span><span class="fu">::</span><span class="fu"><a href="../reference/option_or_default.html">option_or_default</a></span><span class="op">(</span><span class="va">options</span>, <span class="st">"st_velocity_threshold"</span>, <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># vote on each sample  </span></span>
<span>  <span class="va">sample_vote</span> <span class="op">&lt;-</span> <span class="va">vel</span><span class="op">[[</span><span class="st">'amp'</span><span class="op">]</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">velocity_threshold</span></span>
<span>  </span>
<span>  <span class="co"># return votes</span></span>
<span>  <span class="va">sample_vote</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Once you implemented your method, you can pass it alongside
internally implemented methods:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"single_trial"</span><span class="op">)</span></span>
<span><span class="va">saccades</span> <span class="op">&lt;-</span> <span class="fu">saccadr</span><span class="fu">::</span><span class="fu"><a href="../reference/extract_saccades.html">extract_saccades</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">single_trial</span><span class="op">$</span><span class="va">x</span>,</span>
<span>                                      y <span class="op">=</span> <span class="va">single_trial</span><span class="op">$</span><span class="va">y</span>,</span>
<span>                                      sample_rate <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                                      methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"ek"</span>, <span class="st">"om"</span>, <span class="st">"nh"</span>, <span class="va">simple_threshold_method</span><span class="op">)</span>,</span>
<span>                                      options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"st_velocity_threshold"</span> <span class="op">=</span> <span class="fl">70</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://alexander-pastukhov.github.io/" class="external-link">Alexander Pastukhov</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
